(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{hiddenPairs:()=>Je,nakedPairs:()=>qe,pointingArrows:()=>Ye});var n,o,r,i,l,s,c={},u=[],a=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function f(e,t){for(var n in t)e[n]=t[n];return e}function _(e){var t=e.parentNode;t&&t.removeChild(e)}function d(e,t,o){var r,i,l,s={};for(l in t)"key"==l?r=t[l]:"ref"==l?i=t[l]:s[l]=t[l];if(arguments.length>2&&(s.children=arguments.length>3?n.call(arguments,2):o),"function"==typeof e&&null!=e.defaultProps)for(l in e.defaultProps)void 0===s[l]&&(s[l]=e.defaultProps[l]);return p(e,s,r,i,null)}function p(e,t,n,i,l){var s={type:e,props:t,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:l??++r};return null!=o.vnode&&o.vnode(s),s}function h(e){return e.children}function v(e,t){this.props=e,this.context=t}function y(e,t){if(null==t)return e.__?y(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?y(e):null}function b(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return b(e)}}function g(e){(!e.__d&&(e.__d=!0)&&i.push(e)&&!m.__r++||s!==o.debounceRendering)&&((s=o.debounceRendering)||l)(m)}function m(){for(var e;m.__r=i.length;)e=i.sort((function(e,t){return e.__v.__b-t.__v.__b})),i=[],e.some((function(e){var t,n,o,r,i,l;e.__d&&(i=(r=(t=e).__v).__e,(l=t.__P)&&(n=[],(o=f({},r)).__v=r.__v+1,A(l,r,o,t.__n,void 0!==l.ownerSVGElement,null!=r.__h?[i]:null,n,i??y(r),r.__h),D(n,r),r.__e!=i&&b(r)))}))}function k(e,t,n,o,r,i,l,s,a,f){var _,d,v,b,g,m,k,C=o&&o.__k||u,P=C.length;for(n.__k=[],_=0;_<t.length;_++)if(null!=(b=n.__k[_]=null==(b=t[_])||"boolean"==typeof b?null:"string"==typeof b||"number"==typeof b||"bigint"==typeof b?p(null,b,null,null,b):Array.isArray(b)?p(h,{children:b},null,null,null):b.__b>0?p(b.type,b.props,b.key,null,b.__v):b)){if(b.__=n,b.__b=n.__b+1,null===(v=C[_])||v&&b.key==v.key&&b.type===v.type)C[_]=void 0;else for(d=0;d<P;d++){if((v=C[d])&&b.key==v.key&&b.type===v.type){C[d]=void 0;break}v=null}A(e,b,v=v||c,r,i,l,s,a,f),g=b.__e,(d=b.ref)&&v.ref!=d&&(k||(k=[]),v.ref&&k.push(v.ref,null,b),k.push(d,b.__c||g,b)),null!=g?(null==m&&(m=g),"function"==typeof b.type&&null!=b.__k&&b.__k===v.__k?b.__d=a=w(b,a,e):a=S(e,b,v,C,g,a),f||"option"!==n.type?"function"==typeof n.type&&(n.__d=a):e.value=""):a&&v.__e==a&&a.parentNode!=e&&(a=y(v))}for(n.__e=m,_=P;_--;)null!=C[_]&&("function"==typeof n.type&&null!=C[_].__e&&C[_].__e==n.__d&&(n.__d=y(o,_+1)),E(C[_],C[_]));if(k)for(_=0;_<k.length;_++)M(k[_],k[++_],k[++_])}function w(e,t,n){var o,r;for(o=0;o<e.__k.length;o++)(r=e.__k[o])&&(r.__=e,t="function"==typeof r.type?w(r,t,n):S(n,r,r,e.__k,r.__e,t));return t}function S(e,t,n,o,r,i){var l,s,c;if(void 0!==t.__d)l=t.__d,t.__d=void 0;else if(null==n||r!=i||null==r.parentNode)e:if(null==i||i.parentNode!==e)e.appendChild(r),l=null;else{for(s=i,c=0;(s=s.nextSibling)&&c<o.length;c+=2)if(s==r)break e;e.insertBefore(r,i),l=i}return void 0!==l?l:r.nextSibling}function C(e,t,n){"-"===t[0]?e.setProperty(t,n):e[t]=null==n?"":"number"!=typeof n||a.test(t)?n:n+"px"}function P(e,t,n,o,r){var i;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof o&&(e.style.cssText=o=""),o)for(t in o)n&&t in n||C(e.style,t,"");if(n)for(t in n)o&&n[t]===o[t]||C(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])i=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?o||e.addEventListener(t,i?j:O,i):e.removeEventListener(t,i?j:O,i);else if("dangerouslySetInnerHTML"!==t){if(r)t=t.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if("href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&t in e)try{e[t]=n??"";break e}catch(e){}"function"==typeof n||(null!=n&&(!1!==n||"a"===t[0]&&"r"===t[1])?e.setAttribute(t,n):e.removeAttribute(t))}}function O(e){this.l[e.type+!1](o.event?o.event(e):e)}function j(e){this.l[e.type+!0](o.event?o.event(e):e)}function A(e,t,n,r,i,l,s,c,u){var a,_,d,p,y,b,g,m,w,S,C,P=t.type;if(void 0!==t.constructor)return null;null!=n.__h&&(u=n.__h,c=t.__e=n.__e,t.__h=null,l=[c]),(a=o.__b)&&a(t);try{e:if("function"==typeof P){if(m=t.props,w=(a=P.contextType)&&r[a.__c],S=a?w?w.props.value:a.__:r,n.__c?g=(_=t.__c=n.__c).__=_.__E:("prototype"in P&&P.prototype.render?t.__c=_=new P(m,S):(t.__c=_=new v(m,S),_.constructor=P,_.render=T),w&&w.sub(_),_.props=m,_.state||(_.state={}),_.context=S,_.__n=r,d=_.__d=!0,_.__h=[]),null==_.__s&&(_.__s=_.state),null!=P.getDerivedStateFromProps&&(_.__s==_.state&&(_.__s=f({},_.__s)),f(_.__s,P.getDerivedStateFromProps(m,_.__s))),p=_.props,y=_.state,d)null==P.getDerivedStateFromProps&&null!=_.componentWillMount&&_.componentWillMount(),null!=_.componentDidMount&&_.__h.push(_.componentDidMount);else{if(null==P.getDerivedStateFromProps&&m!==p&&null!=_.componentWillReceiveProps&&_.componentWillReceiveProps(m,S),!_.__e&&null!=_.shouldComponentUpdate&&!1===_.shouldComponentUpdate(m,_.__s,S)||t.__v===n.__v){_.props=m,_.state=_.__s,t.__v!==n.__v&&(_.__d=!1),_.__v=t,t.__e=n.__e,t.__k=n.__k,t.__k.forEach((function(e){e&&(e.__=t)})),_.__h.length&&s.push(_);break e}null!=_.componentWillUpdate&&_.componentWillUpdate(m,_.__s,S),null!=_.componentDidUpdate&&_.__h.push((function(){_.componentDidUpdate(p,y,b)}))}_.context=S,_.props=m,_.state=_.__s,(a=o.__r)&&a(t),_.__d=!1,_.__v=t,_.__P=e,a=_.render(_.props,_.state,_.context),_.state=_.__s,null!=_.getChildContext&&(r=f(f({},r),_.getChildContext())),d||null==_.getSnapshotBeforeUpdate||(b=_.getSnapshotBeforeUpdate(p,y)),C=null!=a&&a.type===h&&null==a.key?a.props.children:a,k(e,Array.isArray(C)?C:[C],t,n,r,i,l,s,c,u),_.base=t.__e,t.__h=null,_.__h.length&&s.push(_),g&&(_.__E=_.__=null),_.__e=!1}else null==l&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=x(n.__e,t,n,r,i,l,s,u);(a=o.diffed)&&a(t)}catch(e){t.__v=null,(u||null!=l)&&(t.__e=c,t.__h=!!u,l[l.indexOf(c)]=null),o.__e(e,t,n)}}function D(e,t){o.__c&&o.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){o.__e(e,t.__v)}}))}function x(e,t,o,r,i,l,s,u){var a,f,d,p=o.props,h=t.props,v=t.type,b=0;if("svg"===v&&(i=!0),null!=l)for(;b<l.length;b++)if((a=l[b])&&(a===e||(v?a.localName==v:3==a.nodeType))){e=a,l[b]=null;break}if(null==e){if(null===v)return document.createTextNode(h);e=i?document.createElementNS("http://www.w3.org/2000/svg",v):document.createElement(v,h.is&&h),l=null,u=!1}if(null===v)p===h||u&&e.data===h||(e.data=h);else{if(l=l&&n.call(e.childNodes),f=(p=o.props||c).dangerouslySetInnerHTML,d=h.dangerouslySetInnerHTML,!u){if(null!=l)for(p={},b=0;b<e.attributes.length;b++)p[e.attributes[b].name]=e.attributes[b].value;(d||f)&&(d&&(f&&d.__html==f.__html||d.__html===e.innerHTML)||(e.innerHTML=d&&d.__html||""))}if(function(e,t,n,o,r){var i;for(i in n)"children"===i||"key"===i||i in t||P(e,i,null,n[i],o);for(i in t)r&&"function"!=typeof t[i]||"children"===i||"key"===i||"value"===i||"checked"===i||n[i]===t[i]||P(e,i,t[i],n[i],o)}(e,h,p,i,u),d)t.__k=[];else if(b=t.props.children,k(e,Array.isArray(b)?b:[b],t,o,r,i&&"foreignObject"!==v,l,s,l?l[0]:o.__k&&y(o,0),u),null!=l)for(b=l.length;b--;)null!=l[b]&&_(l[b]);u||("value"in h&&void 0!==(b=h.value)&&(b!==e.value||"progress"===v&&!b)&&P(e,"value",b,p.value,!1),"checked"in h&&void 0!==(b=h.checked)&&b!==e.checked&&P(e,"checked",b,p.checked,!1))}return e}function M(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){o.__e(e,n)}}function E(e,t,n){var r,i;if(o.unmount&&o.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||M(r,null,t)),null!=(r=e.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(e){o.__e(e,t)}r.base=r.__P=null}if(r=e.__k)for(i=0;i<r.length;i++)r[i]&&E(r[i],t,"function"!=typeof e.type);n||null==e.__e||_(e.__e),e.__e=e.__d=void 0}function T(e,t,n){return this.constructor(e,n)}function $(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function F(e){return!!e&&!!e[ge]}function R(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===me}(e)||Array.isArray(e)||!!e[be]||!!e.constructor[be]||U(e)||L(e))}function z(e,t,n){void 0===n&&(n=!1),0===I(e)?(n?Object.keys:ke)(e).forEach((function(o){n&&"symbol"==typeof o||t(o,e[o],e)})):e.forEach((function(n,o){return t(o,n,e)}))}function I(e){var t=e[ge];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:U(e)?2:L(e)?3:0}function N(e,t){return 2===I(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function B(e,t,n){var o=I(e);2===o?e.set(t,n):3===o?(e.delete(t),e.add(n)):e[t]=n}function U(e){return pe&&e instanceof Map}function L(e){return he&&e instanceof Set}function V(e){return e.o||e.t}function K(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=we(e);delete t[ge];for(var n=ke(t),o=0;o<n.length;o++){var r=n[o],i=t[r];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[r]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[r]})}return Object.create(Object.getPrototypeOf(e),t)}function W(e,t){return void 0===t&&(t=!1),G(e)||F(e)||!R(e)||(I(e)>1&&(e.set=e.add=e.clear=e.delete=H),Object.freeze(e),t&&z(e,(function(e,t){return W(t,!0)}),!0)),e}function H(){$(2)}function G(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function J(e){var t=Se[e];return t||$(18,e),t}function X(){return _e}function q(e,t){t&&(J("Patches"),e.u=[],e.s=[],e.v=t)}function Q(e){Y(e),e.p.forEach(ee),e.p=null}function Y(e){e===_e&&(_e=e.l)}function Z(e){return _e={p:[],l:_e,h:e,m:!0,_:0}}function ee(e){var t=e[ge];0===t.i||1===t.i?t.j():t.O=!0}function te(e,t){t._=t.p.length;var n=t.p[0],o=void 0!==e&&e!==n;return t.h.g||J("ES5").S(t,e,o),o?(n[ge].P&&(Q(t),$(4)),R(e)&&(e=ne(t,e),t.l||re(t,e)),t.u&&J("Patches").M(n[ge],e,t.u,t.s)):e=ne(t,n,[]),Q(t),t.u&&t.v(t.u,t.s),e!==ye?e:void 0}function ne(e,t,n){if(G(t))return t;var o=t[ge];if(!o)return z(t,(function(r,i){return oe(e,o,t,r,i,n)}),!0),t;if(o.A!==e)return t;if(!o.P)return re(e,o.t,!0),o.t;if(!o.I){o.I=!0,o.A._--;var r=4===o.i||5===o.i?o.o=K(o.k):o.o;z(3===o.i?new Set(r):r,(function(t,i){return oe(e,o,r,t,i,n)})),re(e,r,!1),n&&e.u&&J("Patches").R(o,n,e.u,e.s)}return o.o}function oe(e,t,n,o,r,i){if(F(r)){var l=ne(e,r,i&&t&&3!==t.i&&!N(t.D,o)?i.concat(o):void 0);if(B(n,o,l),!F(l))return;e.m=!1}if(R(r)&&!G(r)){if(!e.h.F&&e._<1)return;ne(e,r),t&&t.A.l||re(e,r)}}function re(e,t,n){void 0===n&&(n=!1),e.h.F&&e.m&&W(t,n)}function ie(e,t){var n=e[ge];return(n?V(n):e)[t]}function le(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var o=Object.getOwnPropertyDescriptor(n,t);if(o)return o;n=Object.getPrototypeOf(n)}}function se(e){e.P||(e.P=!0,e.l&&se(e.l))}function ce(e){e.o||(e.o=K(e.t))}function ue(e,t,n){var o=U(t)?J("MapSet").N(t,n):L(t)?J("MapSet").T(t,n):e.g?function(e,t){var n=Array.isArray(e),o={i:n?1:0,A:t?t.A:X(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},r=o,i=Ce;n&&(r=[o],i=Pe);var l=Proxy.revocable(r,i),s=l.revoke,c=l.proxy;return o.k=c,o.j=s,c}(t,n):J("ES5").J(t,n);return(n?n.A:X()).p.push(o),o}function ae(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return K(e)}n=u.slice,o={__e:function(e,t){for(var n,o,r;t=t.__;)if((n=t.__c)&&!n.__)try{if((o=n.constructor)&&null!=o.getDerivedStateFromError&&(n.setState(o.getDerivedStateFromError(e)),r=n.__d),null!=n.componentDidCatch&&(n.componentDidCatch(e),r=n.__d),r)return n.__E=n}catch(t){e=t}throw e}},r=0,v.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=f({},this.state),"function"==typeof e&&(e=e(f({},n),this.props)),e&&f(n,e),null!=e&&this.__v&&(t&&this.__h.push(t),g(this))},v.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),g(this))},v.prototype.render=h,i=[],l="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,m.__r=0,"undefined"!=typeof window&&window.__PREACT_DEVTOOLS__&&window.__PREACT_DEVTOOLS__.attachPreact("10.5.14",o,{Fragment:h,Component:v});var fe,_e,de="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),pe="undefined"!=typeof Map,he="undefined"!=typeof Set,ve="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,ye=de?Symbol.for("immer-nothing"):((fe={})["immer-nothing"]=!0,fe),be=de?Symbol.for("immer-draftable"):"__$immer_draftable",ge=de?Symbol.for("immer-state"):"__$immer_state",me=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),ke="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,we=Object.getOwnPropertyDescriptors||function(e){var t={};return ke(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},Se={},Ce={get:function(e,t){if(t===ge)return e;var n=V(e);if(!N(n,t))return function(e,t,n){var o,r=le(t,n);return r?"value"in r?r.value:null===(o=r.get)||void 0===o?void 0:o.call(e.k):void 0}(e,n,t);var o=n[t];return e.I||!R(o)?o:o===ie(e.t,t)?(ce(e),e.o[t]=ue(e.A.h,o,e)):o},has:function(e,t){return t in V(e)},ownKeys:function(e){return Reflect.ownKeys(V(e))},set:function(e,t,n){var o=le(V(e),t);if(null==o?void 0:o.set)return o.set.call(e.k,n),!0;if(!e.P){var r=ie(V(e),t),i=null==r?void 0:r[ge];if(i&&i.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}(n,r)&&(void 0!==n||N(e.t,t)))return!0;ce(e),se(e)}return e.o[t]===n&&"number"!=typeof n&&(void 0!==n||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return void 0!==ie(e.t,t)||t in e.t?(e.D[t]=!1,ce(e),se(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=V(e),o=Reflect.getOwnPropertyDescriptor(n,t);return o?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:o.enumerable,value:n[t]}:o},defineProperty:function(){$(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){$(12)}},Pe={};z(Ce,(function(e,t){Pe[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),Pe.deleteProperty=function(e,t){return Ce.deleteProperty.call(this,e[0],t)},Pe.set=function(e,t,n){return Ce.set.call(this,e[0],t,n,e[0])};var Oe=new(function(){function e(e){var t=this;this.g=ve,this.F=!0,this.produce=function(e,n,o){if("function"==typeof e&&"function"!=typeof n){var r=n;n=e;var i=t;return function(e){var t=this;void 0===e&&(e=r);for(var o=arguments.length,l=Array(o>1?o-1:0),s=1;s<o;s++)l[s-1]=arguments[s];return i.produce(e,(function(e){var o;return(o=n).call.apply(o,[t,e].concat(l))}))}}var l;if("function"!=typeof n&&$(6),void 0!==o&&"function"!=typeof o&&$(7),R(e)){var s=Z(t),c=ue(t,e,void 0),u=!0;try{l=n(c),u=!1}finally{u?Q(s):Y(s)}return"undefined"!=typeof Promise&&l instanceof Promise?l.then((function(e){return q(s,o),te(e,s)}),(function(e){throw Q(s),e})):(q(s,o),te(l,s))}if(!e||"object"!=typeof e){if((l=n(e))===ye)return;return void 0===l&&(l=e),t.F&&W(l,!0),l}$(21,e)},this.produceWithPatches=function(e,n){return"function"==typeof e?function(n){for(var o=arguments.length,r=Array(o>1?o-1:0),i=1;i<o;i++)r[i-1]=arguments[i];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(r))}))}:[t.produce(e,n,(function(e,t){o=e,r=t})),o,r];var o,r},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){R(e)||$(8),F(e)&&(e=function(e){return F(e)||$(22,e),function e(t){if(!R(t))return t;var n,o=t[ge],r=I(t);if(o){if(!o.P&&(o.i<4||!J("ES5").K(o)))return o.t;o.I=!0,n=ae(t,r),o.I=!1}else n=ae(t,r);return z(n,(function(t,r){o&&function(e,t){return 2===I(e)?e.get(t):e[t]}(o.t,t)===r||B(n,t,e(r))})),3===r?new Set(n):n}(e)}(e));var t=Z(this),n=ue(this,e,void 0);return n[ge].C=!0,Y(t),n},t.finishDraft=function(e,t){var n=(e&&e[ge]).A;return q(n,t),te(void 0,n)},t.setAutoFreeze=function(e){this.F=e},t.setUseProxies=function(e){e&&!ve&&$(20),this.g=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var o=t[n];if(0===o.path.length&&"replace"===o.op){e=o.value;break}}var r=J("Patches").$;return F(e)?r(e,t):this.produce(e,(function(e){return r(e,t.slice(n+1))}))},e}()),je=Oe.produce;Oe.produceWithPatches.bind(Oe),Oe.setAutoFreeze.bind(Oe),Oe.setUseProxies.bind(Oe),Oe.applyPatches.bind(Oe),Oe.createDraft.bind(Oe),Oe.finishDraft.bind(Oe);const Ae="object"==typeof global&&global&&global.Object===Object&&global;var De="object"==typeof self&&self&&self.Object===Object&&self;const xe=(Ae||De||Function("return this")()).Symbol,Me=Array.isArray;var Ee=Object.prototype,Te=Ee.hasOwnProperty,$e=Ee.toString,Fe=xe?xe.toStringTag:void 0,Re=Object.prototype.toString,ze=xe?xe.toStringTag:void 0;var Ie=xe?xe.prototype:void 0,Ne=Ie?Ie.toString:void 0;const Be=function e(t){if("string"==typeof t)return t;if(Me(t))return function(e,t){for(var n=-1,o=null==e?0:e.length,r=Array(o);++n<o;)r[n]=t(e[n],n,e);return r}(t,e)+"";if(function(e){return"symbol"==typeof e||function(e){return null!=e&&"object"==typeof e}(e)&&"[object Symbol]"==function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":ze&&ze in Object(e)?function(e){var t=Te.call(e,Fe),n=e[Fe];try{e[Fe]=void 0;var o=!0}catch(e){}var r=$e.call(e);return o&&(t?e[Fe]=n:delete e[Fe]),r}(e):function(e){return Re.call(e)}(e)}(e)}(t))return Ne?Ne.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n};var Ue=0;const Le=()=>new Set(Array.from({length:9},((e,t)=>`${t+1}`)));class Ve{content;possible=Le();key=function(e){var t,n=++Ue;return(null==(t=e)?"":Be(t))+n}("cell-");valid=!0;setValidity=()=>(this.valid=void 0===this.content?this.possible.size>0:/^[1-9]$/.test(this.content),this);setContent=e=>((e=e.trim())?(this.content=e.trim(),this.possible.clear()):this.clear(),this.setValidity());clear=()=>(this.content=void 0,this.possible=Le(),this.valid=!0,this)}const Ke=e=>16843009*((e=(858993459&(e-=e>>1&1431655765))+(e>>2&858993459))+(e>>4)&252645135)>>24,We=["getRow","getCol","getBlock"],He=e=>{const t=Math.log2(e);if(t!==Math.trunc(t))throw new TypeError(`${e} doesn't have exactly one bit.`);return t},Ge=(e,t)=>{let n=!1;for(let o=0;o<9;++o){const r=e[t](o),i=new Map;for(let e=0;e<9;++e){const{content:t,possible:n}=r[e];if(void 0===t)for(const t of n)i.set(t,(i.get(t)??0)|2**e);else i.set(t,(i.get(t)??0)|2**e)}const l=new Map;for(const[e,t]of i){if(Ke(t)>8)continue;let n=l.get(t);n||(n=[],l.set(t,n)),n.push(e)}for(const[e,t]of l){if(Ke(e)<t.length)throw new Error(`bitCount was smaller than allowed: ${e.toString(2)}; ${t.join(",")}`);if(!(Ke(e)>t.length))for(let o=0;o<=Math.log2(e);++o){if(0==(e&2**o))continue;const i=r[o];i.possible.size>t.length&&(n=!0,i.possible=new Set(t))}}}return n},Je=e=>{let t=!1;for(const n of We)t=Ge(e,n)||t;return t},Xe=(e,t)=>{let n=!1;for(let o=0;o<9;++o){const r=e[t](o),i=new Map;for(const[e,t]of r.entries())if(void 0===t.content){let n=0;for(const e of t.possible)n|=2**(Number(e)-1);i.set(e,n)}else i.set(e,(i.get(e)??0)|2**(Number(t.content)-1));const l=new Map;for(const[e,t]of i){let n=l.get(t);n||(n=[],l.set(t,n)),n.push(e)}for(const[e,t]of l)if(!(Ke(e)!==t.length||t.length>8))for(let o=0;o<=Math.log2(e);++o){if(0==(e&2**o))continue;const i=`${o+1}`;for(const[e,o]of r.entries())!t.includes(e)&&o.possible.has(i)&&(n=!0,o.possible.delete(i))}}return n},qe=e=>{let t=!1;for(const n of We)t=Xe(e,n)||t;return t},Qe=(e,t,n)=>{let o=!1;for(const[r,i]of e.entries())r>=t&&r<t+3||i.possible.has(n)&&(o=!0,i.possible.delete(n));return o},Ye=e=>{let t=!1;for(let n=0;n<9;++n){const o=e.getBlock(n),r=3*Math.trunc(n/3),i=n%3*3,l=new Map;for(const[e,{content:t,possible:n}]of o.entries()){const o=2**(e%3)|2**(Math.trunc(e/3)+3);if(void 0===t)for(const e of n)l.set(e,(l.get(e)??0)|o);else l.set(t,(l.get(t)??0)|o)}for(const[n,o]of l){const l=7&o,s=o>>3&7;1===Ke(l)&&Ke(s)>1?t=Qe(e.getCol(i+He(l)),r,n)||t:1===Ke(s)&&Ke(l)>1&&(t=Qe(e.getRow(r+He(s)),i,n)||t)}}return t},Ze=(e,t,n)=>{if(!Number.isInteger(n))throw new TypeError(`${n} was not an integer.`);if(n<e||n>t)throw new RangeError(`${n} ∉ [${e}, ${t}].`)};class et{_cells;#subscriptions=new Set;#plugins=Object.values(t);constructor(e){if(this._cells=Array.from({length:81},(()=>new Ve)),e)for(const[t,n]of e.entries())for(const[e,o]of n.entries())if("number"==typeof o){const n=9*t;this.setContent(n+e,`${o}`)}}setContent=(e,t)=>(Ze(0,80,e),this._cells[e].setContent(t),this.cellsIndividuallyValidByStructure(),this.#dispatch("change"));getContent=e=>(Ze(0,80,e),this._cells[e].content);clearCell=e=>(this.getCell(e).clear(),this.cellsIndividuallyValidByStructure(),this.#dispatch("change"));clearAllCells=()=>{for(const e of this._cells)e.clear();return this.#dispatch("change")};getCol=e=>{Ze(0,8,e);const t=[];for(let n=e;n<81;n+=9)t.push(this._cells[n]);return t};getRow=e=>(Ze(0,8,e),e*=9,this._cells.slice(e,e+9));getBlock=e=>{Ze(0,8,e);const t=e%3*3,n=3*Math.floor(e/3),o=[];for(let e=0;e<9;++e){let r=n+Math.floor(e/3);const i=t+e%3;r*=9,o.push(this.getCell(r+i))}return o};getCell=e=>(Ze(0,80,e),this._cells[e]);getCells=()=>[...this._cells];solve=()=>{if(this.isValid()){for(const e of this._cells)void 0===e.content&&e.clear();let e=!1,t=!0;do{e=!1;for(const n of this.#plugins)try{e=n(this)||e}catch(e){console.error(e,this._cells),t=!1;break}for(const[e,n]of this._cells.entries())if(void 0===n.content)if(1===n.possible.size)n.setContent(n.possible.values().next().value);else if(0===n.possible.size){console.error("cell.possible.size === 0",[e,n]),t=!1;break}t&&=this.isValid()}while(e&&t);this.#dispatch(t?"finish":"error")}else this.#dispatch("error");return this};subscribe=e=>(this.#subscriptions.add(e),this);unsubscribe=e=>(this.#subscriptions.delete(e),this);#dispatch=e=>{for(const t of this.#subscriptions)t(this,e);return this};cellsIndividuallyValidByStructure=()=>{for(const e of this._cells)e.setValidity();for(let e=0;e<9;++e)for(const t of[this.getCol(e),this.getRow(e),this.getBlock(e)])this._validateByStructure(t);for(const[e,t]of this._cells.entries())if(!t.valid)return console.error("cell was not valid",[e,t]),!1;return!0};isValid=()=>{const e=["getRow","getBlock","getCol"];for(const t of e)for(let e=0;e<9;++e){const n=this[t](e),o=new Map;for(const e of n)if(void 0===e.content)for(const t of e.possible)o.set(t,(o.get(t)??0)+1);else o.set(e.content,(o.get(e.content)??0)+1);if(9!==o.size)return console.error("dict.size !== 9",o),!1}return this.cellsIndividuallyValidByStructure()};_validateByStructure=e=>{const t=new Map;for(const{content:n}of e)"string"==typeof n&&t.set(n,(t.get(n)??0)+1);for(const[n,o]of t)if(1!==o)for(const[t,o]of e.entries())o.content===n&&(console.error("cell.content === key",[t,o]),o.valid=!1);return this};isSolved=()=>{if(!this.cellsIndividuallyValidByStructure())return!1;for(const e of this._cells)if(void 0===e.content)return!1;return!0}}const tt=()=>d("svg",{width:"16",height:"16",fill:"currentColor",class:"svg-eraser-fill",viewBox:"0 0 16 16"},d("path",{d:"M8.086 2.207a2 2 0 0 1 2.828 0l3.879 3.879a2 2 0 0 1 0 2.828l-5.5 5.5A2 2 0 0 1 7.879 15H5.12a2 2 0 0 1-1.414-.586l-2.5-2.5a2 2 0 0 1 0-2.828l6.879-6.879zm.66 11.34L3.453 8.254 1.914 9.793a1 1 0 0 0 0 1.414l2.5 2.5a1 1 0 0 0 .707.293H7.88a1 1 0 0 0 .707-.293l.16-.16z"})),nt=void 0,ot={easy:[[5,nt,3,nt,9,4],[nt,9,nt,nt,3,6,2,5,8],[nt,nt,nt,nt,nt,nt,3],[nt,nt,8,9,5,nt,6,7],[],[nt,7,2,nt,6,1,4],[nt,nt,4],[6,5,9,8,2,nt,nt,1],[nt,nt,nt,1,4,nt,5,nt,6]],evil:[[6,nt,4,nt,nt,nt,nt,nt,3],[nt,nt,nt,nt,3,7,8],[nt,nt,nt,5,nt,nt,7],[8,9,nt,1],[3,nt,nt,nt,nt,nt,nt,nt,2],[nt,nt,nt,nt,nt,3,nt,1,9],[nt,nt,5,nt,nt,9],[nt,nt,1,8,6],[9,nt,nt,nt,nt,nt,4,nt,8]],expert:[[nt,nt,nt,nt,nt,4,nt,nt,2],[nt,6,nt,2,nt,nt,nt,3],[nt,8,nt,nt,nt,3,5,nt,9],[nt,4,nt,nt,nt,nt,1],[1,nt,nt,7,nt,5],[5,nt,3],[nt,9,nt,3],[nt,nt,4,nt,6,1],[nt,nt,5,nt,nt,nt,7]],invalid1:[[],[nt,nt,nt,6],[nt,nt,nt,5],[nt,nt,nt,nt,nt,nt,5,6],[],[nt,6,5],[nt,nt,nt,nt,nt,5],[nt,nt,nt,nt,nt,6]],invalid2:[[nt,nt,nt,nt,1],[nt,nt,nt,nt,2],[nt,nt,nt,nt,3],[],[4,5,6],[nt,nt,nt,nt,nt,nt,4,5,6],[nt,nt,nt,1],[nt,nt,nt,2],[nt,nt,nt,3]]};!function(e,t){var r,i,l;o.__&&o.__(e,t),i=(r=!1)?null:t.__k,l=[],A(t,e=t.__k=d(h,null,[e]),i||c,c,void 0!==t.ownerSVGElement,i?null:t.firstChild?n.call(t.childNodes):null,l,i?i.__e:t.firstChild,r),D(l,e)}(d(class extends v{#sudokuClass=new et(ot.expert);state={cells:this.#sudokuClass.getCells(),error:void 0,focused:0};constructor(...e){super(...e),this.#sudokuClass.subscribe(((e,t)=>{switch(t){case"change":this.setState({cells:e.getCells(),error:void 0});break;case"finish":{const t=e.isSolved();this.setState({cells:e.getCells(),error:t?void 0:"Sudoku wasn't solved completely."});break}case"error":this.setState({error:"Sudoku is invalid"})}}))}componentDidMount=()=>{document.addEventListener("keydown",this.handleKeyDown)};componentWillUnmount=()=>{document.removeEventListener("keydown",this.handleKeyDown)};render=()=>{const{cells:e,error:t,focused:n}=this.state;return d("div",{class:"App"},d("div",{class:"sudoku"},e.map((({content:e,key:t,valid:o},r)=>d("div",{key:t,class:`cell${o?"":" invalid-input"}${n===r?" focused-cell":""}`,"data-index":r,onMouseDown:this.handleCellClick(r),onTouchStart:e=>{e.preventDefault(),this.handleCellClick(r)()}},e)))),void 0!==typeof t&&d("div",{class:"error"},t),d("button",{type:"button",title:"Solve sudoku",class:"solve",onClick:this.solve},"Solve"),d("button",{type:"button",title:"Clear sudoku",class:"clear",onClick:this.clear},"Clear"),d("div",{class:"keyboardless-inputs"},Array.from({length:9},((e,t)=>d("div",{key:t,class:"keyboardless-input",title:`${t+1}`,onClick:this.handleKeyboardlessClick(`${t+1}`)},t+1))),d("div",{class:"keyboardless-input input-eraser",title:"Clear cell",onClick:this.handleKeyboardlessClick(" ")},d(tt,null))))};solve=()=>{this.#sudokuClass.solve()};clear=()=>{this.#sudokuClass.clearAllCells()};handleCellClick=e=>()=>{this.setState({focused:e})};handleKeyDown=e=>{this.setState(je((t=>{const n=e.key.toLowerCase();switch(n){case"arrowdown":case"arrowup":{const e="arrowdown"===n?9:-9;let o=t.focused+e;o<0?o+=81:o>80&&(o-=81),t.focused=o;break}case"arrowright":case"arrowleft":{const e="arrowright"===n?1:-1,o=t.focused%9+e;o<0?t.focused+=8:o>8?t.focused-=8:t.focused+=e;break}case" ":this.#sudokuClass.clearCell(t.focused),t.focused=(t.focused+1)%81;break;case"tab":{e.preventDefault();const{shiftKey:n}=e,o=n?-1:1;t.focused=(t.focused+o+81)%81;break}case"delete":case"backspace":this.#sudokuClass.clearCell(t.focused);break;default:/^[1-9]$/.test(n)&&(this.#sudokuClass.setContent(t.focused,n),t.focused=(t.focused+1)%81)}})))};handleKeyboardlessClick=e=>()=>{" "===e?this.#sudokuClass.clearCell(this.state.focused):(this.#sudokuClass.setContent(this.state.focused,e),this.setState(je((e=>{e.focused=(e.focused+1)%81}))))}},null),document.body)})();
//# sourceMappingURL=script.js.map